# ü§ñ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ OpenAI Assistant

–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ OpenAI Assistant –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∞–Ω–∞–ª–∏–∑–æ–≤.

## üìã –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

1. **–ê–∫–∫–∞—É–Ω—Ç OpenAI** - [platform.openai.com](https://platform.openai.com)
2. **API –∫–ª—é—á** —Å –¥–æ—Å—Ç—É–ø–æ–º –∫ GPT-4
3. **Python 3.11+** —Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏

## üöÄ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ OpenAI Assistant

### 1. –°–æ–∑–¥–∞–Ω–∏–µ Assistant –≤ OpenAI

1. –ó–∞–π–¥–∏—Ç–µ –≤ [OpenAI Platform](https://platform.openai.com/assistants)
2. –ù–∞–∂–º–∏—Ç–µ "Create Assistant"
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª—è:
   - **Name**: `–¶–∏—Ñ—Ä–æ–≤–æ–π –ü—Å–∏—Ö–æ–ª–æ–≥`
   - **Instructions**: –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∏–∑ `src/services/openai_prompts.py` (SYSTEM_PROMPT)
   - **Model**: `gpt-4-turbo-preview`
   - **Tools**: –û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ Assistant –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –µ–≥–æ ID (–Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `asst_`)

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–û–±–Ω–æ–≤–∏—Ç–µ –≤–∞—à `.env` —Ñ–∞–π–ª:

```env
# OpenAI
OPENAI_API_KEY=sk-your-api-key-here
OPENAI_ASSISTANT_ID=asst_your_assistant_id_here
```

### 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

### 4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
python test_openai.py
```

## üîß –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± (–±–µ–∑ Assistant)

–ï—Å–ª–∏ –Ω–µ —Ö–æ—Ç–∏—Ç–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å Assistant, –±–æ—Ç –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Chat Completion API:

```env
# –¢–æ–ª—å–∫–æ API –∫–ª—é—á, –±–µ–∑ Assistant ID
OPENAI_API_KEY=sk-your-api-key-here
# OPENAI_ASSISTANT_ID=  # –û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º
```

## üìù –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç

–°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è Assistant –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `src/services/openai_prompts.py`:

```python
SYSTEM_PROMPT = """–¢—ã - –æ–ø—ã—Ç–Ω—ã–π —Ü–∏—Ñ—Ä–æ–≤–æ–π –ø—Å–∏—Ö–æ–ª–æ–≥, —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—â–∏–π—Å—è –Ω–∞ —Å–∏—Å—Ç–µ–º–µ –ú–∏–ª–∞–Ω—ã –¢–∞—Ä–±–∞ –ø–æ —Ü–∏—Ñ—Ä–æ–ª–æ–≥–∏–∏..."""
```

### –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –ø—Ä–æ–º–ø—Ç–∞:

1. **–†–æ–ª—å**: –¶–∏—Ñ—Ä–æ–≤–æ–π –ø—Å–∏—Ö–æ–ª–æ–≥ —Å –≥–ª—É–±–æ–∫–∏–º –ø–æ–Ω–∏–º–∞–Ω–∏–µ–º —Å–∏—Å—Ç–µ–º—ã –ú–∏–ª–∞–Ω—ã –¢–∞—Ä–±–∞
2. **–ü—Ä–∏–Ω—Ü–∏–ø—ã**: –ù–∞—É—á–Ω—ã–π –ø–æ–¥—Ö–æ–¥, –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è, –ø–æ–∑–∏—Ç–∏–≤–Ω–æ—Å—Ç—å, –ø—Ä–∞–∫—Ç–∏—á–Ω–æ—Å—Ç—å
3. **–°—Ç—Ä—É–∫—Ç—É—Ä–∞**: –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å, –≥–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑ —á–∏—Å–µ–ª, –º–∞—Ç—Ä–∏—Ü–∞ —ç–Ω–µ—Ä–≥–∏–π, –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
4. **–°—Ç–∏–ª—å**: –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π, –Ω–æ —Ç—ë–ø–ª—ã–π –∏ –ø–æ–Ω–∏–º–∞—é—â–∏–π

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ—Å—Ç

```bash
python test_openai.py
```

### –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞: `python main.py`
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start` –≤ Telegram
3. –í–≤–µ–¥–∏—Ç–µ –¥–∞—Ç—É —Ä–æ–∂–¥–µ–Ω–∏—è –∏ –∏–º—è
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ–ª—É—á–∞–µ—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑

## üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å

### Assistant API
- **–°–æ–∑–¥–∞–Ω–∏–µ Assistant**: –ë–µ—Å–ø–ª–∞—Ç–Ω–æ
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: ~$0.01-0.03 –∑–∞ –∞–Ω–∞–ª–∏–∑ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –¥–ª–∏–Ω—ã)

### Chat Completion API
- **GPT-4 Turbo**: ~$0.01-0.02 –∑–∞ –∞–Ω–∞–ª–∏–∑

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

1. **–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ** API –∫–ª—é—á–∏ –≤ Git
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ** –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
3. **–û–≥—Ä–∞–Ω–∏—á—å—Ç–µ** –¥–æ—Å—Ç—É–ø –∫ API –∫–ª—é—á–∞–º
4. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ OpenAI Dashboard

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –û—à–∏–±–∫–∞ API –∫–ª—é—á–∞

```
‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å OpenAI: Incorrect API key provided
```

**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å API –∫–ª—é—á–∞ –≤ `.env`

### –û—à–∏–±–∫–∞ Assistant ID

```
‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å OpenAI: Invalid assistant ID
```

**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å Assistant ID –≤ `.env`

### –û—à–∏–±–∫–∞ –º–æ–¥–µ–ª–∏

```
‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å OpenAI: Model not found
```

**–†–µ—à–µ–Ω–∏–µ**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ GPT-4

### Fallback –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –æ—Ç—á—ë—Ç

–ï—Å–ª–∏ OpenAI –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –±–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—Å—è –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –æ—Ç—á—ë—Ç:

```
‚ö†Ô∏è OpenAI –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω: [–æ—à–∏–±–∫–∞]
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### OpenAI Dashboard
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ API
- –°—Ç–æ–∏–º–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤
- –û—à–∏–±–∫–∏ –∏ –ª–∏–º–∏—Ç—ã

### –õ–æ–≥–∏ –±–æ—Ç–∞
- –£—Å–ø–µ—à–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ OpenAI
- –û—à–∏–±–∫–∏ –∏ fallback –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –æ—Ç—á—ë—Ç

## üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –±–æ—Ç–∞
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `python test_openai.py`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å OpenAI –≤ [—Å—Ç–∞—Ç—É—Å-—Å—Ç—Ä–∞–Ω–∏—Ü–µ](https://status.openai.com)
4. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ OpenAI](https://platform.openai.com/docs)

## üìà –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

### –î–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è —Å—Ç–æ–∏–º–æ—Å—Ç–∏:
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–æ–ª–µ–µ –∫–æ—Ä–æ—Ç–∫–∏–µ –ø—Ä–æ–º–ø—Ç—ã
2. –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ max_tokens
3. –ö—ç—à–∏—Ä—É–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–ª—è –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### –î–ª—è —É–ª—É—á—à–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞:
1. –¢–æ–Ω–∫–æ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç
2. –î–æ–±–∞–≤—å—Ç–µ –ø—Ä–∏–º–µ—Ä—ã –≤ –ø—Ä–æ–º–ø—Ç
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–æ–ª–µ–µ –Ω–æ–≤—ã–µ –º–æ–¥–µ–ª–∏
